

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Janus Gateway &mdash; webrtc_tutorial 1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="MediaSoup" href="mediasoup.html" />
    <link rel="prev" title="AppRTC" href="apprtc.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> webrtc_tutorial
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../outline.html">目录</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1.basic/index.html">1. WebRTC 基础</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2.transport/index.html">2. WebRTC 传输</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3.media/index.html">3. WebRTC 媒体</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">4. WebRTC 实践</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">WebRTC 应用实践要点</a></li>
<li class="toctree-l2"><a class="reference internal" href="wasm.html">WebAssebly</a></li>
<li class="toctree-l2"><a class="reference internal" href="sfu.html">SFU Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="webrtc_source.html">WebRTC 源码分析</a></li>
<li class="toctree-l2"><a class="reference internal" href="webrtc_test.html">WebRTC test suite</a></li>
<li class="toctree-l2"><a class="reference internal" href="apprtc.html">AppRTC</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Janus Gateway</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installation-and-startup">Installation and startup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usage-and-testing">usage and testing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#echotest">EchoTest</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#code-structure">code structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dependencies">dependencies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#janus-js-api">Janus JS API</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example">Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reference">Reference</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mediasoup.html">MediaSoup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../5.tool/index.html">5. WebRTC 工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../6.misc/index.html">6. WebRTC 关联技术</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">webrtc_tutorial</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">4. WebRTC 实践</a> &raquo;</li>
        
      <li>Janus Gateway</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/4.practice/janus.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="janus-gateway">
<h1>Janus Gateway<a class="headerlink" href="#janus-gateway" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id1">Overview</a></p></li>
<li><p><a class="reference internal" href="#installation-and-startup" id="id2">Installation and startup</a></p></li>
<li><p><a class="reference internal" href="#usage-and-testing" id="id3">usage and testing</a></p>
<ul>
<li><p><a class="reference internal" href="#echotest" id="id4">EchoTest</a></p>
<ul>
<li><p><a class="reference internal" href="#client" id="id5">client:</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#code-structure" id="id6">code structure</a></p></li>
<li><p><a class="reference internal" href="#dependencies" id="id7">dependencies</a></p>
<ul>
<li><p><a class="reference internal" href="#janus-js-api" id="id8">Janus JS API</a></p></li>
<li><p><a class="reference internal" href="#example" id="id9">Example</a></p></li>
<li><p><a class="reference internal" href="#reference" id="id10">Reference</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id1">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Janus是由 Meetecho 设计和开发的一种开源通用WebRTC服务器。 该版本的服务器专为Linux系统量身定制，尽管它也可以为MacOS机器编译和安装。
不支持Windows，但是如果有此要求，Janus可以在Windows 10上的“ Linux的Windows子系统”中运行：
不要信任提供Janus的.exe版本的存储库，它们不是官方的，将不受支持。</p>
<p>Janus 由 Janus CORE、Janus Plugin 以及信令接口三部分组成。</p>
<ul class="simple">
<li><p>信令接口，Janus 支持的信令协议比较多，如 HTTP、WebSocket、RabbitMQ 等。这些信令协议使得 Janus 具有非常好的接入性。因为很多公司喜欢各种不同的协议，如有的喜欢 websocket，有的喜欢http，proto等。因此 Janus 在信令接入方面具有很大的优势。</p></li>
<li><dl class="simple">
<dt>Janus Plugin，Janus 的业务管理是按照 Plugin 的方式管理的，因此你可以在Janus中根据自己的需要实现自己的业务插件。实际上，对于一般性的需求 Janus 已经相关的插件。如：</dt><dd><ul>
<li><p>VideoRoom，用于多人音视频互动，像音视频会议，在线教育都可以通过该插件来实现。</p></li>
<li><p>VideoCall，用于 1:1 的音视频通信。</p></li>
<li><p>SIP，用于与传统电话设备对接。</p></li>
<li><p>Streaming，用于广播，也就是我们通常所说的一人共享，多人观看的直播模式。</p></li>
<li><p>TextRoom，它是一个聊天室，通过它可以进行文本聊天。</p></li>
<li><p>RecordPlay，用于录制和回放。</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Janus Core 是Janus的核心，其作用是处理流的转发，各种协议的接入。以浏览器为例，要想让浏览器接入到 WebRTC 流媒体服务器上，那流媒体服务器必须要支持 STUN、DTLS、SRTP、ICE 等协议。</p>
</div>
<div class="section" id="installation-and-startup">
<h2><a class="toc-backref" href="#id2">Installation and startup</a><a class="headerlink" href="#installation-and-startup" title="Permalink to this headline">¶</a></h2>
<p># CentOS7 64bit</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">yum</span> <span class="n">install</span> <span class="n">libmicrohttpd</span><span class="o">-</span><span class="n">devel</span> <span class="n">jansson</span><span class="o">-</span><span class="n">devel</span> \
<span class="n">openssl</span><span class="o">-</span><span class="n">devel</span> <span class="n">libsrtp</span><span class="o">-</span><span class="n">devel</span> <span class="n">sofia</span><span class="o">-</span><span class="n">sip</span><span class="o">-</span><span class="n">devel</span> <span class="n">glib2</span><span class="o">-</span><span class="n">devel</span> <span class="n">libnice</span><span class="o">-</span><span class="n">devel</span> \
<span class="n">opus</span><span class="o">-</span><span class="n">devel</span> <span class="n">libogg</span><span class="o">-</span><span class="n">devel</span> <span class="n">libcurl</span><span class="o">-</span><span class="n">devel</span> <span class="n">pkgconfig</span> <span class="n">gengetopt</span> \
<span class="n">libconfig</span><span class="o">-</span><span class="n">devel</span> <span class="n">libtool</span> <span class="n">autoconf</span> <span class="n">automake</span>

<span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">cisco</span><span class="o">/</span><span class="n">libsrtp</span><span class="o">/</span><span class="n">archive</span><span class="o">/</span><span class="n">v2</span><span class="o">.</span><span class="mf">2.0</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
    <span class="n">tar</span> <span class="n">xfv</span> <span class="n">v2</span><span class="o">.</span><span class="mf">2.0</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
    <span class="n">cd</span> <span class="n">libsrtp</span><span class="o">-</span><span class="mf">2.2</span><span class="o">.</span><span class="mi">0</span>
    <span class="o">./</span><span class="n">configure</span> <span class="o">--</span><span class="n">prefix</span><span class="o">=/</span><span class="n">usr</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">openssl</span> <span class="o">--</span><span class="n">libdir</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib64</span>
    <span class="n">make</span> <span class="n">shared_library</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">libwebsockets</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">repo</span><span class="o">/</span><span class="n">libwebsockets</span>
<span class="n">cd</span> <span class="n">libwebsockets</span>
<span class="c1"># If you want the stable version of libwebsockets, uncomment the next line</span>
<span class="c1"># git checkout v3.2-stable</span>
<span class="n">mkdir</span> <span class="n">build</span>
<span class="n">cd</span> <span class="n">build</span>
<span class="c1"># See https://github.com/meetecho/janus-gateway/issues/732 re: LWS_MAX_SMP</span>
<span class="n">cmake</span> <span class="o">-</span><span class="n">DLWS_MAX_SMP</span><span class="o">=</span><span class="mi">1</span> <span class="o">-</span><span class="n">DCMAKE_INSTALL_PREFIX</span><span class="p">:</span><span class="n">PATH</span><span class="o">=/</span><span class="n">usr</span> <span class="o">-</span><span class="n">DCMAKE_C_FLAGS</span><span class="o">=</span><span class="s2">&quot;-fpic&quot;</span> <span class="o">..</span>
<span class="n">make</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">ftp</span><span class="o">.</span><span class="n">gnu</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">gnu</span><span class="o">/</span><span class="n">libmicrohttpd</span><span class="o">/</span><span class="n">libmicrohttpd</span><span class="o">-</span><span class="mf">0.9</span><span class="o">.</span><span class="mf">59.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">tar</span> <span class="n">xvf</span> <span class="n">libmicrohttpd</span><span class="o">-</span><span class="mf">0.9</span><span class="o">.</span><span class="mf">59.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">cd</span> <span class="n">libmicrohttpd</span><span class="o">-</span><span class="mf">0.9</span><span class="o">.</span><span class="mi">59</span>
<span class="o">./</span><span class="n">configure</span> <span class="o">--</span><span class="n">libdir</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib64</span>
<span class="n">make</span>
<span class="n">sudo</span> <span class="n">make</span> <span class="n">install</span>
<span class="n">sudo</span> <span class="n">ldconfig</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sh</span> <span class="n">autogen</span><span class="o">.</span><span class="n">sh</span>
<span class="c1">#to generate the configure file. After that, configure and compile as usual to start the whole compilation process:</span>
<span class="o">./</span><span class="n">configure</span> <span class="o">--</span><span class="n">prefix</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">janus</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">websockets</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">rest</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">docs</span>
<span class="n">make</span>
<span class="n">make</span> <span class="n">install</span>
<span class="c1">#Since Janus requires configuration files for both the core and its modules in order to work, you&#39;ll probably also want to install the default configuration files to use, which you can do this way:</span>
<span class="c1">#make configs</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">janus</span>
<span class="o">./</span><span class="nb">bin</span><span class="o">/</span><span class="n">janus</span> <span class="o">&amp;</span>

<span class="n">yum</span> <span class="n">install</span> <span class="n">nginx</span>
<span class="n">nginx</span>
<span class="n">cp</span> <span class="o">-</span><span class="n">rf</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">janus</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">janus</span><span class="o">/</span><span class="n">demos</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">html</span><span class="o">/</span>
<span class="c1">#open http://$host/demos</span>


<span class="c1"># netstat -anp|grep janus</span>
<span class="n">tcp</span>        <span class="mi">0</span>      <span class="mi">0</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">:</span><span class="mi">8188</span>            <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">:</span><span class="o">*</span>               <span class="n">LISTEN</span>      <span class="mi">27849</span><span class="o">/./</span><span class="nb">bin</span><span class="o">/</span><span class="n">janus</span>
<span class="n">tcp6</span>       <span class="mi">0</span>      <span class="mi">0</span> <span class="p">:::</span><span class="mi">8088</span>                 <span class="p">:::</span><span class="o">*</span>                    <span class="n">LISTEN</span>      <span class="mi">27849</span><span class="o">/./</span><span class="nb">bin</span><span class="o">/</span><span class="n">janus</span>
<span class="n">udp6</span>       <span class="mi">0</span>      <span class="mi">0</span> <span class="p">:::</span><span class="mi">5002</span>                 <span class="p">:::</span><span class="o">*</span>                                <span class="mi">27849</span><span class="o">/./</span><span class="nb">bin</span><span class="o">/</span><span class="n">janus</span>
<span class="n">udp6</span>       <span class="mi">0</span>      <span class="mi">0</span> <span class="p">:::</span><span class="mi">5004</span>                 <span class="p">:::</span><span class="o">*</span>                                <span class="mi">27849</span><span class="o">/./</span><span class="nb">bin</span><span class="o">/</span><span class="n">janus</span>
<span class="n">unix</span>  <span class="mi">3</span>      <span class="p">[</span> <span class="p">]</span>         <span class="n">STREAM</span>     <span class="n">CONNECTED</span>     <span class="mi">6894357</span>  <span class="mi">27849</span><span class="o">/./</span><span class="nb">bin</span><span class="o">/</span><span class="n">janus</span>
<span class="n">unix</span>  <span class="mi">3</span>      <span class="p">[</span> <span class="p">]</span>         <span class="n">STREAM</span>     <span class="n">CONNECTED</span>     <span class="mi">6894356</span>  <span class="mi">27849</span><span class="o">/./</span><span class="nb">bin</span><span class="o">/</span><span class="n">janus</span>
</pre></div>
</div>
</div>
<div class="section" id="usage-and-testing">
<h2><a class="toc-backref" href="#id3">usage and testing</a><a class="headerlink" href="#usage-and-testing" title="Permalink to this headline">¶</a></h2>
<div class="section" id="echotest">
<h3><a class="toc-backref" href="#id4">EchoTest</a><a class="headerlink" href="#echotest" title="Permalink to this headline">¶</a></h3>
<p>This Echo Test demo just blindly sends you back whatever you send to it.
You’re basically attached to yourself, and so your audio and video you send to Janus are echoed back to you.</p>
<p>The same is done for RTCP packets as well, with the information properly updated.</p>
<div class="section" id="client">
<h4><a class="toc-backref" href="#id5">client:</a><a class="headerlink" href="#client" title="Permalink to this headline">¶</a></h4>
<p>open <a class="reference external" href="http://10.224.85.233/demos/echotest.html">http://10.224.85.233/demos/echotest.html</a> by firefox</p>
<p>Janus Object init</p>
<p>1) POST /janus
* response: sessionId is the data.id</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="s2">&quot;janus&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
<span class="s2">&quot;transaction&quot;</span><span class="p">:</span> <span class="s2">&quot;iqHi029hsJF3&quot;</span><span class="p">,</span>
<span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1730150663723177</span>
<span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>JSEP</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="p">{</span>
    <span class="s2">&quot;janus&quot;</span><span class="p">:</span> <span class="s2">&quot;event&quot;</span><span class="p">,</span>
    <span class="s2">&quot;session_id&quot;</span><span class="p">:</span> <span class="mi">76377000668057</span><span class="p">,</span>
    <span class="s2">&quot;transaction&quot;</span><span class="p">:</span> <span class="s2">&quot;AlvApIFrqWBE&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sender&quot;</span><span class="p">:</span> <span class="mi">4176087136988668</span><span class="p">,</span>
    <span class="s2">&quot;plugindata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;plugin&quot;</span><span class="p">:</span> <span class="s2">&quot;janus.plugin.echotest&quot;</span><span class="p">,</span>
        <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;echotest&quot;</span><span class="p">:</span> <span class="s2">&quot;event&quot;</span><span class="p">,</span>
            <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;ok&quot;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;jsep&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;answer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sdp&quot;</span><span class="p">:</span> <span class="s2">&quot;v=0</span><span class="se">\r\n</span>
        <span class="n">o</span><span class="o">=</span><span class="n">mozilla</span><span class="o">...</span><span class="n">THIS_IS_SDPARTA</span><span class="o">-</span><span class="mf">63.0</span><span class="o">.</span><span class="mi">3</span> <span class="mi">1603271024498389</span> <span class="mi">1</span> <span class="n">IN</span> <span class="n">IP4</span> <span class="mf">10.224</span><span class="o">.</span><span class="mf">85.233</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">s</span><span class="o">=-</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">t</span><span class="o">=</span><span class="mi">0</span> <span class="mi">0</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">group</span><span class="p">:</span><span class="n">BUNDLE</span> <span class="mi">0</span> <span class="mi">1</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">msid</span><span class="o">-</span><span class="n">semantic</span><span class="p">:</span> <span class="n">WMS</span> <span class="n">janus</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">m</span><span class="o">=</span><span class="n">audio</span> <span class="mi">9</span> <span class="n">UDP</span><span class="o">/</span><span class="n">TLS</span><span class="o">/</span><span class="n">RTP</span><span class="o">/</span><span class="n">SAVPF</span> <span class="mi">109</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">c</span><span class="o">=</span><span class="n">IN</span> <span class="n">IP4</span> <span class="mf">10.224</span><span class="o">.</span><span class="mf">85.233</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">sendrecv</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">mid</span><span class="p">:</span><span class="mi">0</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">rtcp</span><span class="o">-</span><span class="n">mux</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">ice</span><span class="o">-</span><span class="n">ufrag</span><span class="p">:</span><span class="n">AUe7</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">ice</span><span class="o">-</span><span class="n">pwd</span><span class="p">:</span><span class="n">XgM3SlRrtjdv</span><span class="o">+</span><span class="n">kDY5T1ITI</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">ice</span><span class="o">-</span><span class="n">options</span><span class="p">:</span><span class="n">trickle</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">fingerprint</span><span class="p">:</span><span class="n">sha</span><span class="o">-</span><span class="mi">256</span> <span class="mi">44</span><span class="p">:</span><span class="mi">98</span><span class="p">:</span><span class="n">B3</span><span class="p">:</span><span class="n">C6</span><span class="p">:</span><span class="n">A8</span><span class="p">:</span><span class="mi">88</span><span class="p">:</span><span class="n">ED</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">0</span><span class="n">F</span><span class="p">:</span><span class="mi">2</span><span class="n">E</span><span class="p">:</span><span class="mi">1</span><span class="n">A</span><span class="p">:</span><span class="mi">58</span><span class="p">:</span><span class="mi">65</span><span class="p">:</span><span class="n">A3</span><span class="p">:</span><span class="n">CB</span><span class="p">:</span><span class="mi">46</span><span class="p">:</span><span class="mi">65</span><span class="p">:</span><span class="mi">2</span><span class="n">F</span><span class="p">:</span><span class="mi">8</span><span class="n">A</span><span class="p">:</span><span class="n">AB</span><span class="p">:</span><span class="n">E1</span><span class="p">:</span><span class="n">BF</span><span class="p">:</span><span class="n">D5</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">85</span><span class="p">:</span><span class="mi">3</span><span class="n">E</span><span class="p">:</span><span class="mi">95</span><span class="p">:</span><span class="mi">9</span><span class="n">E</span><span class="p">:</span><span class="n">CF</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">63</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">setup</span><span class="p">:</span><span class="n">active</span>\<span class="n">r</span>\<span class="n">na</span><span class="o">=</span><span class="n">rtpmap</span><span class="p">:</span><span class="mi">109</span> <span class="n">opus</span><span class="o">/</span><span class="mi">48000</span><span class="o">/</span><span class="mi">2</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">fmtp</span><span class="p">:</span><span class="mi">109</span> <span class="n">useinbandfec</span><span class="o">=</span><span class="mi">1</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">extmap</span><span class="p">:</span><span class="mi">1</span> <span class="n">urn</span><span class="p">:</span><span class="n">ietf</span><span class="p">:</span><span class="n">params</span><span class="p">:</span><span class="n">rtp</span><span class="o">-</span><span class="n">hdrext</span><span class="p">:</span><span class="n">ssrc</span><span class="o">-</span><span class="n">audio</span><span class="o">-</span><span class="n">level</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">extmap</span><span class="p">:</span><span class="mi">3</span> <span class="n">urn</span><span class="p">:</span><span class="n">ietf</span><span class="p">:</span><span class="n">params</span><span class="p">:</span><span class="n">rtp</span><span class="o">-</span><span class="n">hdrext</span><span class="p">:</span><span class="n">sdes</span><span class="p">:</span><span class="n">mid</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">msid</span><span class="p">:</span><span class="n">janus</span> <span class="n">janusa0</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">ssrc</span><span class="p">:</span><span class="mi">705498670</span> <span class="n">cname</span><span class="p">:</span><span class="n">janus</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">ssrc</span><span class="p">:</span><span class="mi">705498670</span> <span class="n">msid</span><span class="p">:</span><span class="n">janus</span> <span class="n">janusa0</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">ssrc</span><span class="p">:</span><span class="mi">705498670</span> <span class="n">mslabel</span><span class="p">:</span><span class="n">janus</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">ssrc</span><span class="p">:</span><span class="mi">705498670</span> <span class="n">label</span><span class="p">:</span><span class="n">janusa0</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">candidate</span><span class="p">:</span><span class="mi">1</span> <span class="mi">1</span> <span class="n">udp</span> <span class="mi">2013266431</span> <span class="mf">10.224</span><span class="o">.</span><span class="mf">85.233</span> <span class="mi">37266</span> <span class="n">typ</span> <span class="n">host</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">end</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">candidates</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">m</span><span class="o">=</span><span class="n">video</span> <span class="mi">9</span> <span class="n">UDP</span><span class="o">/</span><span class="n">TLS</span><span class="o">/</span><span class="n">RTP</span><span class="o">/</span><span class="n">SAVPF</span> <span class="mi">120</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">c</span><span class="o">=</span><span class="n">IN</span> <span class="n">IP4</span> <span class="mf">10.224</span><span class="o">.</span><span class="mf">85.233</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">sendrecv</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">mid</span><span class="p">:</span><span class="mi">1</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">rtcp</span><span class="o">-</span><span class="n">mux</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">ice</span><span class="o">-</span><span class="n">ufrag</span><span class="p">:</span><span class="n">AUe7</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">ice</span><span class="o">-</span><span class="n">pwd</span><span class="p">:</span><span class="n">XgM3SlRrtjdv</span><span class="o">+</span><span class="n">kDY5T1ITI</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">ice</span><span class="o">-</span><span class="n">options</span><span class="p">:</span><span class="n">trickle</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">fingerprint</span><span class="p">:</span><span class="n">sha</span><span class="o">-</span><span class="mi">256</span> <span class="mi">44</span><span class="p">:</span><span class="mi">98</span><span class="p">:</span><span class="n">B3</span><span class="p">:</span><span class="n">C6</span><span class="p">:</span><span class="n">A8</span><span class="p">:</span><span class="mi">88</span><span class="p">:</span><span class="n">ED</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">0</span><span class="n">F</span><span class="p">:</span><span class="mi">2</span><span class="n">E</span><span class="p">:</span><span class="mi">1</span><span class="n">A</span><span class="p">:</span><span class="mi">58</span><span class="p">:</span><span class="mi">65</span><span class="p">:</span><span class="n">A3</span><span class="p">:</span><span class="n">CB</span><span class="p">:</span><span class="mi">46</span><span class="p">:</span><span class="mi">65</span><span class="p">:</span><span class="mi">2</span><span class="n">F</span><span class="p">:</span><span class="mi">8</span><span class="n">A</span><span class="p">:</span><span class="n">AB</span><span class="p">:</span><span class="n">E1</span><span class="p">:</span><span class="n">BF</span><span class="p">:</span><span class="n">D5</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">85</span><span class="p">:</span><span class="mi">3</span><span class="n">E</span><span class="p">:</span><span class="mi">95</span><span class="p">:</span><span class="mi">9</span><span class="n">E</span><span class="p">:</span><span class="n">CF</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">63</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">setup</span><span class="p">:</span><span class="n">active</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">rtpmap</span><span class="p">:</span><span class="mi">120</span> <span class="n">VP8</span><span class="o">/</span><span class="mi">90000</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">rtcp</span><span class="o">-</span><span class="n">fb</span><span class="p">:</span><span class="mi">120</span> <span class="n">ccm</span> <span class="n">fir</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">rtcp</span><span class="o">-</span><span class="n">fb</span><span class="p">:</span><span class="mi">120</span> <span class="n">nack</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">rtcp</span><span class="o">-</span><span class="n">fb</span><span class="p">:</span><span class="mi">120</span> <span class="n">nack</span> <span class="n">pli</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">rtcp</span><span class="o">-</span><span class="n">fb</span><span class="p">:</span><span class="mi">120</span> <span class="n">goog</span><span class="o">-</span><span class="n">remb</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">rtcp</span><span class="o">-</span><span class="n">fb</span><span class="p">:</span><span class="mi">120</span> <span class="n">transport</span><span class="o">-</span><span class="n">cc</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">extmap</span><span class="p">:</span><span class="mi">3</span> <span class="n">urn</span><span class="p">:</span><span class="n">ietf</span><span class="p">:</span><span class="n">params</span><span class="p">:</span><span class="n">rtp</span><span class="o">-</span><span class="n">hdrext</span><span class="p">:</span><span class="n">sdes</span><span class="p">:</span><span class="n">mid</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">fmtp</span><span class="p">:</span><span class="mi">120</span> <span class="nb">max</span><span class="o">-</span><span class="n">fs</span><span class="o">=</span><span class="mi">12288</span><span class="p">;</span><span class="nb">max</span><span class="o">-</span><span class="n">fr</span><span class="o">=</span><span class="mi">60</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">msid</span><span class="p">:</span><span class="n">janus</span> <span class="n">janusv0</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">ssrc</span><span class="p">:</span><span class="mi">3463695356</span> <span class="n">cname</span><span class="p">:</span><span class="n">janus</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">ssrc</span><span class="p">:</span><span class="mi">3463695356</span> <span class="n">msid</span><span class="p">:</span><span class="n">janus</span> <span class="n">janusv0</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">ssrc</span><span class="p">:</span><span class="mi">3463695356</span> <span class="n">mslabel</span><span class="p">:</span><span class="n">janus</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">ssrc</span><span class="p">:</span><span class="mi">3463695356</span> <span class="n">label</span><span class="p">:</span><span class="n">janusv0</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">candidate</span><span class="p">:</span><span class="mi">1</span> <span class="mi">1</span> <span class="n">udp</span> <span class="mi">2013266431</span> <span class="mf">10.224</span><span class="o">.</span><span class="mf">85.233</span> <span class="mi">37266</span> <span class="n">typ</span> <span class="n">host</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">end</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">candidates</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">m</span><span class="o">=</span><span class="n">application</span> <span class="mi">0</span> <span class="n">UDP</span><span class="o">/</span><span class="n">DTLS</span><span class="o">/</span><span class="n">SCTP</span> <span class="n">webrtc</span><span class="o">-</span><span class="n">datachannel</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">c</span><span class="o">=</span><span class="n">IN</span> <span class="n">IP4</span> <span class="mf">10.224</span><span class="o">.</span><span class="mf">85.233</span>\<span class="n">r</span>\<span class="n">n</span>
        <span class="n">a</span><span class="o">=</span><span class="n">inactive</span>\<span class="n">r</span>\<span class="n">n</span><span class="s2">&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>server:</p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="code-structure">
<h2><a class="toc-backref" href="#id6">code structure</a><a class="headerlink" href="#code-structure" title="Permalink to this headline">¶</a></h2>
<p>Janus 的 Plugin 机制是它扩展功能的核心机制</p>
</div>
<div class="section" id="dependencies">
<h2><a class="toc-backref" href="#id7">dependencies</a><a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>To install it, you’ll need to satisfy the following dependencies:</p>
<ul class="simple">
<li><p>Jansson</p></li>
<li><p>libconfig</p></li>
<li><p>libnice (at least v0.1.16 suggested, master recommended)</p></li>
<li><p>OpenSSL (at least v1.0.1e)</p></li>
<li><p>libsrtp (at least v2.x suggested)</p></li>
<li><p>usrsctp (only needed if you are interested in Data Channels)</p></li>
<li><p>libmicrohttpd (at least v0.9.59; only needed if you are interested in REST support for the Janus API)</p></li>
<li><p>libwebsockets (only needed if you are interested in WebSockets support for the Janus API)</p></li>
<li><p>cmake (only needed if you are interested in WebSockets and/or BoringSSL support, as they make use of it)</p></li>
<li><p>rabbitmq-c (only needed if you are interested in RabbitMQ support for the Janus API or events)</p></li>
<li><p>paho.mqtt.c (only needed if you are interested in MQTT support for the Janus API or events)</p></li>
<li><p>nanomsg (only needed if you are interested in Nanomsg support for the Janus API)</p></li>
<li><p>libcurl (only needed if you are interested in the TURN REST API support)</p></li>
</ul>
<p>A couple of plugins depend on a few more libraries:</p>
<ul class="simple">
<li><p>Sofia-SIP (only needed for the SIP plugin)</p></li>
<li><p>libopus (only needed for the AudioBridge plugin)</p></li>
<li><p>libogg (needed for the VoiceMail plugin and/or post-processor, and optionally AudioBridge and Streaming plugins)</p></li>
<li><p>libcurl (only needed if you are interested in RTSP support in the Streaming plugin or in the sample Event Handler plugin)</p></li>
<li><p>Lua (only needed for the Lua plugin)</p></li>
</ul>
<p>Additionally, you’ll need the following libraries and tools:</p>
<ul class="simple">
<li><p>GLib</p></li>
<li><p>zlib</p></li>
<li><p>pkg-config</p></li>
<li><p>gengetopt</p></li>
</ul>
<div class="section" id="janus-js-api">
<h3><a class="toc-backref" href="#id8">Janus JS API</a><a class="headerlink" href="#janus-js-api" title="Permalink to this headline">¶</a></h3>
<p>In general, when using the Janus features, you would normally do the following:</p>
<ul class="simple">
<li><p>include the Janus JavaScript library in your web page;</p></li>
<li><p>initialize the Janus JavaScript library and (optionally) passing its dependencies;</p></li>
<li><p>connect to the server and create a session;</p></li>
<li><p>create one or more handles to attach to a plugin (e.g., echo test and/or streaming);</p></li>
<li><p>interact with the plugin (sending/receiving messages, negotiating a PeerConnection);</p></li>
<li><p>eventually, close all the handles and shutdown the related PeerConnections;</p></li>
<li><p>destroy the session.</p></li>
</ul>
</div>
<div class="section" id="example">
<h3><a class="toc-backref" href="#id9">Example</a><a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>EchoTest</p></li>
<li><p>Ping: <a class="reference external" href="http://10.224.85.233:8188/ping">http://10.224.85.233:8188/ping</a>?</p></li>
</ul>
</div>
<div class="section" id="reference">
<h3><a class="toc-backref" href="#id10">Reference</a><a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Janus google group: <a class="reference external" href="https://groups.google.com/g/meetecho-janus">https://groups.google.com/g/meetecho-janus</a></p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="mediasoup.html" class="btn btn-neutral float-right" title="MediaSoup" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="apprtc.html" class="btn btn-neutral float-left" title="AppRTC" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, walter.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>